<ui:FluentWindow x:Class="AudienciasApp.Views.Dialogs.AIAutoCompleteDialog"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                 Title="‚ú® Asistente IA - Autocompletado"
                 Width="700"
                 Height="600"
                 WindowStartupLocation="CenterOwner"
                 WindowBackdropType="Mica">

  <Grid Margin="24">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <!-- Header -->
    <ui:Card Grid.Row="0"
        Margin="0,0,0,16"
        Padding="16">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <ui:SymbolIcon Symbol="Sparkle24"
                       FontSize="32"
                       Margin="0,0,16,0"
                       Foreground="{DynamicResource PrimaryAccentBrush}"/>

        <StackPanel Grid.Column="1">
          <TextBlock Text="Asistente Inteligente"
                     FontSize="20"
                     FontWeight="SemiBold"/>
          <TextBlock Text="Describe la audiencia y la IA completar√° autom√°ticamente los campos"
                     Opacity="0.7"
                     FontSize="12"
                     Margin="0,4,0,0"/>
        </StackPanel>
      </Grid>
    </ui:Card>

    <!-- Content Area -->
    <TabControl Grid.Row="1"
        x:Name="MainTabs">
      <!-- Input Tab -->
      <TabItem Header="üìù Descripci√≥n">
        <Grid Margin="16">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>

          <TextBlock Grid.Row="0"
                     Text="Escriba o pegue la descripci√≥n de la audiencia:"
                     Margin="0,0,0,8"
                     FontWeight="Medium"/>

          <ui:TextBox Grid.Row="1"
                      x:Name="InputTextBox"
                      PlaceholderText="Ejemplo: La audiencia de imputaci√≥n del proceso 2024-00123 programada para el 15 de marzo de 2024 a las 10:00 AM en el Juzgado Tercero Penal Municipal no se llev√≥ a cabo debido a la inasistencia del fiscal. Se reprogram√≥ para el 22 de marzo."
                      TextWrapping="Wrap"
                      AcceptsReturn="True"
                      VerticalScrollBarVisibility="Auto"
                      VerticalContentAlignment="Top"
                      MinHeight="200"/>

          <StackPanel Grid.Row="2"
                      Orientation="Horizontal"
                      Margin="0,12,0,0">
            <ui:InfoBar IsOpen="True"
                        Severity="Informational"
                        IsClosable="False">
              <ui:InfoBar.Content>
                <TextBlock Text="üí° Tip: Incluya toda la informaci√≥n disponible como fecha, hora, juzgado y motivos"
                           TextWrapping="Wrap"/>
              </ui:InfoBar.Content>
            </ui:InfoBar>
          </StackPanel>
        </Grid>
      </TabItem>

      <!-- Preview Tab -->
      <TabItem Header="üëÅÔ∏è Vista Previa"
          x:Name="PreviewTab"
          IsEnabled="False">
        <ScrollViewer Margin="16">
          <StackPanel>
            <!-- Success Message -->
            <ui:InfoBar x:Name="SuccessInfoBar"
                        Title="‚úÖ Informaci√≥n Extra√≠da Exitosamente"
                        IsOpen="False"
                        Severity="Success"
                        Margin="0,0,0,16"/>

            <!-- Warning Messages -->
            <ItemsControl x:Name="WarningsControl"
                Margin="0,0,0,16">
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <ui:InfoBar Title="‚ö†Ô∏è Advertencia"
                              Content="{Binding}"
                              IsOpen="True"
                              Severity="Warning"
                              Margin="0,0,0,8"/>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- Extracted Fields -->
            <ui:Card Padding="16">
              <Grid>
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="150"/>
                  <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Radicado -->
                <TextBlock Grid.Row="0"
                    Grid.Column="0"
                           Text="Radicado:"
                           FontWeight="Medium"
                           VerticalAlignment="Center"/>
                <ui:TextBox Grid.Row="0"
                    Grid.Column="1"
                            x:Name="PreviewCaseCode"
                            Margin="8,4"/>

                <!-- Tipo -->
                <TextBlock Grid.Row="1"
                    Grid.Column="0"
                           Text="Tipo de Audiencia:"
                           FontWeight="Medium"
                           VerticalAlignment="Center"/>
                <ComboBox Grid.Row="1"
                    Grid.Column="1"
                          x:Name="PreviewHearingType"
                          Margin="8,4">
                  <ComboBoxItem>Alegatos de conclusi√≥n</ComboBoxItem>
                  <ComboBoxItem>Audiencia concentrada</ComboBoxItem>
                  <ComboBoxItem>Audiencia de acusaci√≥n</ComboBoxItem>
                  <ComboBoxItem>Audiencia de conciliaci√≥n</ComboBoxItem>
                  <ComboBoxItem>Audiencia de control de legalidad</ComboBoxItem>
                  <ComboBoxItem>Audiencia de individualizaci√≥n de pena</ComboBoxItem>
                  <ComboBoxItem>Audiencia de imputaci√≥n</ComboBoxItem>
                  <ComboBoxItem>Audiencia de incidente de reparaci√≥n integral</ComboBoxItem>
                  <ComboBoxItem>Audiencia de juicio oral</ComboBoxItem>
                  <ComboBoxItem>Audiencia de medidas de aseguramiento</ComboBoxItem>
                  <ComboBoxItem>Audiencia de nulidad</ComboBoxItem>
                  <ComboBoxItem>Audiencia de preclusi√≥n</ComboBoxItem>
                  <ComboBoxItem>Audiencia de pr√≥rroga</ComboBoxItem>
                  <ComboBoxItem>Audiencia de revisi√≥n de medida</ComboBoxItem>
                  <ComboBoxItem>Audiencia de verificaci√≥n de cumplimiento</ComboBoxItem>
                  <ComboBoxItem>Audiencia preliminar</ComboBoxItem>
                  <ComboBoxItem>Audiencia preparatoria</ComboBoxItem>
                  <ComboBoxItem>Otra</ComboBoxItem>
                </ComboBox>

                <!-- Fecha -->
                <TextBlock Grid.Row="2"
                    Grid.Column="0"
                           Text="Fecha:"
                           FontWeight="Medium"
                           VerticalAlignment="Center"/>
                <DatePicker Grid.Row="2"
                    Grid.Column="1"
                            x:Name="PreviewDate"
                            Margin="8,4"/>

                <!-- Hora -->
                <TextBlock Grid.Row="3"
                    Grid.Column="0"
                           Text="Hora:"
                           FontWeight="Medium"
                           VerticalAlignment="Center"/>
                <ui:TextBox Grid.Row="3"
                    Grid.Column="1"
                            x:Name="PreviewTime"
                            Margin="8,4"/>

                <!-- Juzgado -->
                <TextBlock Grid.Row="4"
                    Grid.Column="0"
                           Text="Juzgado:"
                           FontWeight="Medium"
                           VerticalAlignment="Center"/>
                <ui:TextBox Grid.Row="4"
                    Grid.Column="1"
                            x:Name="PreviewCourt"
                            Margin="8,4"/>

                <!-- Se realiz√≥ -->
                <TextBlock Grid.Row="5"
                    Grid.Column="0"
                           Text="¬øSe realiz√≥?"
                           FontWeight="Medium"
                           VerticalAlignment="Center"/>
                <StackPanel Grid.Row="5"
                    Grid.Column="1"
                            Orientation="Horizontal"
                            Margin="8,4">
                  <RadioButton x:Name="PreviewWasHeldYes"
                               Content="S√≠"
                               GroupName="PreviewRealized"
                               Margin="0,0,16,0"/>
                  <RadioButton x:Name="PreviewWasHeldNo"
                               Content="No"
                               GroupName="PreviewRealized"/>
                </StackPanel>

                <!-- Motivo -->
                <TextBlock Grid.Row="6"
                    Grid.Column="0"
                           Text="Motivo no realizaci√≥n:"
                           FontWeight="Medium"
                           VerticalAlignment="Center"
                           x:Name="ReasonLabel"/>
                <ComboBox Grid.Row="6"
                    Grid.Column="1"
                          x:Name="PreviewReason"
                          Margin="8,4">
                  <ComboBoxItem>Juez</ComboBoxItem>
                  <ComboBoxItem>Fiscal√≠a</ComboBoxItem>
                  <ComboBoxItem>Usuario</ComboBoxItem>
                  <ComboBoxItem>Inpec</ComboBoxItem>
                  <ComboBoxItem>V√≠ctima</ComboBoxItem>
                  <ComboBoxItem>ICBF</ComboBoxItem>
                  <ComboBoxItem>Defensor Confianza</ComboBoxItem>
                  <ComboBoxItem>Defensor P√∫blico</ComboBoxItem>
                </ComboBox>

                <!-- Observaciones -->
                <TextBlock Grid.Row="7"
                    Grid.Column="0"
                           Text="Observaciones:"
                           FontWeight="Medium"
                           VerticalAlignment="Top"
                           Margin="0,8,0,0"/>
                <ui:TextBox Grid.Row="7"
                    Grid.Column="1"
                            x:Name="PreviewObservations"
                            TextWrapping="Wrap"
                            AcceptsReturn="True"
                            MinHeight="60"
                            Margin="8,4"/>

                <!-- Confianza -->
                <TextBlock Grid.Row="8"
                    Grid.Column="0"
                           Text="Confianza IA:"
                           FontWeight="Medium"
                           VerticalAlignment="Center"/>
                <StackPanel Grid.Row="8"
                    Grid.Column="1"
                            Orientation="Horizontal"
                            Margin="8,4">
                  <ProgressBar x:Name="ConfidenceBar"
                               Width="200"
                               Height="20"
                               Minimum="0"
                               Maximum="100"/>
                  <TextBlock x:Name="ConfidenceText"
                             Margin="8,0,0,0"
                             VerticalAlignment="Center"/>
                </StackPanel>
              </Grid>
            </ui:Card>
          </StackPanel>
        </ScrollViewer>
      </TabItem>
    </TabControl>

    <!-- Progress Bar -->
    <ui:Card Grid.Row="2"
             x:Name="ProgressCard"
             Visibility="Collapsed"
             Margin="0,8,0,8"
             Padding="16">
      <StackPanel>
        <TextBlock Text="Procesando con IA..."
                   Margin="0,0,0,8"/>
        <ProgressBar IsIndeterminate="True"
                     Height="4"/>
      </StackPanel>
    </ui:Card>

    <!-- Action Buttons -->
    <StackPanel Grid.Row="3"
                Orientation="Horizontal"
                HorizontalAlignment="Right">
      <ui:Button x:Name="ProcessButton"
                 Content="Procesar con IA"
                 Icon="{ui:SymbolIcon Sparkle24}"
                 Appearance="Primary"
                 Click="ProcessButton_Click"
                 Margin="0,0,8,0"
                 Padding="12,8"/>

      <ui:Button x:Name="ApplyButton"
                 Content="Aplicar al Formulario"
                 Icon="{ui:SymbolIcon Checkmark24}"
                 Appearance="Success"
                 IsEnabled="False"
                 Click="ApplyButton_Click"
                 Margin="0,0,8,0"
                 Padding="12,8"/>

      <ui:Button Content="Cancelar"
                 IsCancel="True"
                 Click="CancelButton_Click"
                 Padding="12,8"/>
    </StackPanel>
  </Grid>
</ui:FluentWindow>
